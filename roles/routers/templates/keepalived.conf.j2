global_defs {
    router_id {{ inventory_hostname }}
    enable_script_security
    script_user root
}

vrrp_instance VI_DMZ {
    state {{ 'MASTER' if inventory_hostname == 'router-1' else 'BACKUP' }}
    interface eth2
    virtual_router_id 51
    priority {{ 100 if inventory_hostname == 'router-1' else 90 }}
    advert_int 1
    authentication { auth_type PASS; auth_pass secret }
    virtual_ipaddress { 10.0.10.1/24 }
    notify "/etc/keepalived/notify_conntrackd.sh"
}

vrrp_instance VI_APP {
    state {{ 'MASTER' if inventory_hostname == 'router-1' else 'BACKUP' }}
    interface eth3
    virtual_router_id 52
    priority {{ 100 if inventory_hostname == 'router-1' else 90 }}
    virtual_ipaddress { 10.0.20.1/24 }
    notify "/etc/keepalived/notify_conntrackd.sh"
}

vrrp_instance VI_DB {
    state {{ 'MASTER' if inventory_hostname == 'router-1' else 'BACKUP' }}
    interface eth4
    virtual_router_id 53
    priority {{ 100 if inventory_hostname == 'router-1' else 90 }}
    virtual_ipaddress { 10.0.30.1/24 }
    notify "/etc/keepalived/notify_conntrackd.sh"
}
